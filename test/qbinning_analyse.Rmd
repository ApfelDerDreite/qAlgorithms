---
title: "Analysis qbinning"
author: "Daniel HÃ¶hn"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#knitr::opts_knit$set(root.dir = "G:/_Studium/Analytik-Praktikum/qbinning")
library(tidyverse)
library(data.table)
```


```{r}
bin_termination <- read.csv("opstats_subsetmz.csv")
bin_termination$change = FALSE

for (i in 2:length(bin_termination$change)) {
  if (bin_termination$binstart[i] < bin_termination$binstart[i-1]) {
    bin_termination$change[i] <- TRUE
  }
}

bin_termination$change <- cumsum(bin_termination$change)
```


```{r}
ggplot(bin_termination[1:40549,])+
  geom_histogram(aes(binend - binstart),binwidth = 1)+
 # scale_x_continuous(trans='log10')+
  scale_y_continuous(trans='log10')+
  xlab("Binsize after mz subsetting (no separation by scans)")+
  ylab("Counts")+
  theme_bw()

ggplot(bin_termination)+
  geom_histogram(aes(subsets),binwidth = 1)+
  scale_y_continuous(trans='log10')+
  xlab("Subsets performed until next bin was found (no separation by scans)")+
  ylab("Counts")+
  theme_bw()


#   geom_linerange(aes(xmin = binstart, xmax = binend, y = log(subsets)))
```


```{r}
runstats <- data.frame(before_mz = c(1,57649,8716,1040,117,14,0), after_mz = c(40549,46373,6858,757,82,7,0), perfectbins = c(2716,14905,1469,143,7,0,0))
```

